[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Project Milestone",
  "enabled": 1,
  "modified": "2024-02-21 14:04:44.526688",
  "module": null,
  "name": "project Milestone",
  "script": "frappe.ui.form.on('Project Milestone', {\n\trefresh(frm) {\n\t    frm.add_custom_button(__('Go To Project'), function(){\n            window.open(`/app/project/${frm.doc.parent_project}`)\n        });\n        \n    \t frm.add_custom_button(__('Go To Task'), function(){\n            window.open(`/app/task?custom_parent_milestone=${frm.doc.name}`)\n        });\n        \n        frm.add_custom_button(__('Go To Story'), function(){\n           window.open(`/app/story?parent_milestone=${frm.doc.name}`)\n        });\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Story",
  "enabled": 1,
  "modified": "2024-02-21 14:05:16.745203",
  "module": null,
  "name": "Story",
  "script": "frappe.ui.form.on('Story', {\n\trefresh(frm) {\n\t\tfrm.add_custom_button(__('Go To Project'), function(){\n            window.open(`/app/project/${frm.doc.parent_project}`)\n        });\n        frm.add_custom_button(__('Go To Milestone'), function(){\n            window.open(`/app/project-milestone/${frm.doc.parent_milestone}`)\n        });\n        frm.add_custom_button(__('Go To Task'), function(){\n            window.open(`/app/task/view/list?custom_parent_story=${frm.doc.name}`)\n        });\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Task",
  "enabled": 1,
  "modified": "2024-02-21 14:05:02.448313",
  "module": null,
  "name": "Task",
  "script": "frappe.ui.form.on('Task', {\n\trefresh(frm) {\n\t\tfrm.add_custom_button(__('Go To Project'), function(){\n            window.open(`/app/project/${frm.doc.project}`)\n        });\n        frm.add_custom_button(__('Go To Milestone'), function(){\n            window.open(`/app/project-milestone/${frm.doc.custom_parent_milestone}`)\n        });\n        frm.add_custom_button(__('Go To Story'), function(){\n            window.open(`/app/story/${frm.doc.custom_parent_story}`)\n        });\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Timesheet",
  "enabled": 1,
  "modified": "2024-03-14 16:47:43.935361",
  "module": "Ctrine",
  "name": "Populating Rows",
  "script": "frappe.ui.form.on('Timesheet', {\r\n    onload: function(frm) {\r\n        var creation_datetime;\r\n\r\n        // Check if the form is new or being edited\r\n        if (frm.doc.__islocal) {\r\n            // Fetch current date and time when creating a new timesheet\r\n            creation_datetime = frappe.datetime.now_datetime();\r\n        } else {\r\n            // Fetch creation date and time from the parent document\r\n            creation_datetime = frm.doc.creation;\r\n        }\r\n\r\n        // Calculate the start date of the current week (Monday)\r\n        var current_date = new Date(creation_datetime);\r\n        var current_day_of_week = current_date.getDay(); // 0 for Sunday, 1 for Monday, etc.\r\n        var start_of_week = new Date(current_date); // Copy current date to avoid modifying original date\r\n        start_of_week.setDate(current_date.getDate() - current_day_of_week + (current_day_of_week === 0 ? -6 : 1)); // Get previous Monday\r\n\r\n        // Calculate the end date of the week (Sunday)\r\n        var end_of_week = new Date(start_of_week);\r\n        end_of_week.setDate(end_of_week.getDate() + 6); // Get next Sunday\r\n\r\n        // Assign date and time for the first row if it exists\r\n        if (frm.doc.time_logs && frm.doc.time_logs.length > 0) {\r\n            frm.doc.time_logs[0].from_time = start_of_week;\r\n            // Other field assignments can be done similarly\r\n        }\r\n\r\n        // Populate rows in the child table for each day of the week from Monday to Sunday\r\n        var current_day = new Date(start_of_week);\r\n        for (var i = 0; i < 7; i++) {\r\n            // If it's not the first row and it exists, create a new row\r\n            if (i > 0 || !frm.doc.time_logs) {\r\n                var new_row = frappe.model.add_child(frm.doc, \"Timesheet Detail\", \"time_logs\");\r\n                new_row.from_time = new Date(current_day); // Assign current_day to the new row's from_time\r\n                // Other field assignments can be done similarly\r\n            }\r\n            current_day.setDate(current_day.getDate() + 1); // Move to the next day\r\n        }\r\n\r\n        // Refresh the child table to reflect the changes\r\n        frm.refresh_field('time_logs');\r\n    }\r\n});\r\n",
  "view": "Form"
 }
]